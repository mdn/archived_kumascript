<%
// Inserts a link to a JS API's documentation in the JS Reference.
// Appropriate styling is applied.
//
// Parameters:
//
//  $0 - API name
//  $1 - name to display (optional)
//  $2 - anchor (#xyz) (optional)
//  $3 - If set, do not put the text in <code></code>
//
//  {{jsxref("Date")}}
//  {{jsxref("Date.prototype.getNumber()")}}
//  {{jsxref("Global_Objects/Date/getNumber", "Date.prototype.getNumber()")}}
//

var l10n = {
    refslug : mdn.localString({
       "en-US": "Reference/",       // US English
       "es"   : "Referencia/",      // Spanish (Español)
       "fr"   : "Reference/",       // French
       "ca"   : "Referencia/"       // Catalan
    }),
    slug : mdn.localString({
        "en-US": "Global_Objects/",
        "es"   : "Objetos_globales/",
        "fr"   : "Objets_globaux/",
        "ca"   : "Objectes_standard/"
    }),
    summary : mdn.localString({
        "en-US": "The documentation about this has not yet been written; please consider contributing!",
        "ru"   : "Документация об этом ещё не написана; пожалуйста, поспособствуйте её написанию!",
        "zh-CN": "此页面仍未被本地化, 期待您的翻译!",
        "fr"   : "Cette documentation n'a pas encore été rédigée, vous pouvez aider en contribuant&nbsp;!",
        "ca"   : "Aquesta pàgina encara no ha estat traduïda. Si us plau consideri contribuir-hi!"
    })
};

var str = $1 || $0;

var URL = "/" + env.locale + "/docs/Web/JavaScript/" + l10n.refslug;

var api  = $0.replace('()', '').replace('.prototype.', '.');

var page = wiki.getPage(URL + $0);
var objectPage = wiki.getPage(URL + l10n.slug +  $0);

if ((api.indexOf("..") === -1) && (api.indexOf(".") !== -1)) { // Handle try...catch case
    URL += l10n.slug + api.replace('.', '/');
} else if (!page.slug && objectPage.slug) {
    URL += l10n.slug + $0;
} else {
    URL += $0;
}

var summary = l10n.summary;
page = wiki.getPage(URL);

if (page && page.summary) {
    summary = mdn.escapeQuotes(page.summary);
}


var code    = !$3 ? '<code>'  : '';
var endcode = !$3 ? '</code>' : '';

%><a href="<%- URL + $2 %>" title="<%-summary%>"><%- code %><%= str %><%- endcode %></a>
