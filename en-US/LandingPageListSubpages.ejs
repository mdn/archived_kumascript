<%
// Inserts a definition list of the subpages of the current page, with each
// page's title as the <dt> term and its SEO summary as the <dd> term.
//
// Parameters:
//  None

function pageSorter(a, b) {
    return a.title.localeCompare(b.title);
}

function escapeQuotes(a) {
    var b = "";
    var len = a.length;
    
    for (var i=0; i<len; i++) {
        var c = a[i];
        if (c=="\"") {
            c="&quot;";
        }
        b += c;
    }
    var regex = /(<([^>]+)>)/ig;
    b = b.replace(regex, "");
    return b;
}

var termList = page.subpagesExpand();
var html = "<dl>";

termList.sort(pageSorter);

var termIndex = 0;
var numTerms = termList.length;

for (var i=0; i<numTerms; i++) {
    var page = termList[i];
    var title = page.title;
    var summary = page.summary.replace(/<img[^>]*>/g," ");
    var url = page.url;
    
    html += "<dt class='landingPageList'><a href='" + url + "'>" + title + "</a></dt><dd class='landingPageList'>" + summary + "</dd>"
}

html += "</dl>";

// Now we have the entire list in HTML. Let's go through it and try to split it into two columns by force.

var len = html.length;
var pt = len/2;
var col2 = html.substr(pt);
var ofs = col2.search("<dt ");
pt += ofs;
col2 = html.substr(pt);
var col1 = html.substr(0, pt);

%>
<div class="row topicpage-table">
<div class="section"><%-col1%></div>
<div class="section"><%-col2%></div>
</div>
