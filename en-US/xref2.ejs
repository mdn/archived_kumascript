<%
/*
 * NOTE: This template should only be used by another template, do not use directly in content
 * Basically any template that ends in xref should use this
 *
 * Inserts an appropriatly styled cross reference link. Usually, you should use the xref macro.
 * This macro lets you specify multiple URLs to try, for cases where the target might be in
 * one of a number of places.
 *
 * $0 - URL list; URLs are separated by the "|" character.
 * $1 - Link text
 * $2 - Show tooltip summary (optional - Default is True except when the URL contains an anchor)
 *      This should only be set to false for content areas where the summary is consistantly poor as a short term solution
 */
 
// Get the page summary
var summary = "";
var url = "";

var urllist = $0.split("|");
var count = urllist.length;

for (var i=0; i<count; i++) {
    var page = wiki.getPage($0);
    
    if (page) {
        url = urllist[i];
        break;
    }
}

if (($2 !== false && $0.indexOf("#") === -1) || $2 === true) {
    if (page && page.summary) {
        summary = mdn.escapeQuotes(page.summary);
    } else {
        switch(lang) {
            default:
            summary = "This article hasn't been written yet. Please consider contributing!";
        }
    }
}

%><code><a href="<%-url%>" title="<%-summary%>"><%- $1 %></a></code>
