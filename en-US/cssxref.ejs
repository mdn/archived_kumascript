<%
// Inserts a link to a CSS entity documentation
// Appropriate styling is applied.
//
// Parameters:
//
//  $0 - API name
//  $1 - name to display (optional)
//  $2 - anchor (#xyz) (optional)

var lang = env.locale;
var url = "";
var str = ($1 || $0);
var localStrings = string.deserialize(template("L10n:Common"));

str = str.toLowerCase();
url = "/" + lang + "/docs/Web/CSS/" + $0 + $2;

var thisPage = null; // Will be lazy evaluated
if (!$1) {
    thisPage = wiki.getPage(url); // lazy evaluation

    // Append parameter brackets to CSS functions
    if (page.hasTag(thisPage, "CSS Function")) {
        str += "()";
    }

    // Enclose CSS data types in arrow brackets
    if (page.hasTag(thisPage, "CSS Data Type") && !/^&lt;.+&gt;$/.test(str)) {
        str += "&lt;" + str + "&gt;";
    }
}

var summary = "";

if (!$2) {
    //if (!thisPage) thisPage = wiki.getPage(url); // lazy evaluation // Disabled to test performance (we get a lot of Kumascript errors)

    if (thisPage && thisPage.summary) {
        summary = mdn.escapeQuotes(thisPage.summary);
    } else {
        summary = mdn.getLocalString(localStrings, "summary");
    }
}

var entry = "<a href=\"" + url + "\"" + (summary?" title=\""+summary+"\"":"") + "><code>" + str + "</code></a>";


%><%- entry %>
