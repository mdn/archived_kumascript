<%
// Creates the HTML for a "Related topics" box to be used on a landing page.
//
// Parameters:
//  $0  A JSON object as described below.
//
//  articles:  An array of URIs to pages on MDN to which to link.
//  links:     An array of JSON objects describing off-site links (see below).
//
// Both "articles" and "links" are optional, although you obviously should provide
// at least one of them.
//
// The "links" objects look like this:
//
//  name:      The name to use for the link
//  url:       The URL to link to
//
// Example:
//
//  {{LandingPageRelatedBox(

var linkList = "";
var offsiteList = "";
var relTopicsTitle = "";
var relTopicsMessage = "";

switch(env.locale) {
    default:
        relTopicsTitle = "Related topics";
        relTopicsMessage = "These topics may also be of interest:";
        break;
}

// Start with the on-site links

var len = $0.articles.length;

if (len) {
    linkList = "<ul>";
    for (var i=0; i<len; i++) {
        var page = wiki.getPage($0.articles[i]);
        linkList += "<li><a href='" + page.url + "'>" + page.title + "</a></li>";
    }
    linkList += "</ul>"
}

// Now do the off-site links

len = $0.links.length;

if (len) {
    offsiteList = "<ul>";
    for (var i=0; i<len; i++) {
        offsiteList += "<li><a href='" + $1.links[i].url + "'>" + $1.links[i].name + "</a></li>";
    }
    offsiteList += "</ul>";
}
%>

<div class="landingPageBox">
<h2 class="Related_Topics" id="Related_Topics"><%=relTopicsTitle%></h2>
<p><%=relTopicsMessage%></p>
<%-linkList%>
<%-offsiteList%>
</div>
