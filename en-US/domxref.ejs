
<pre class="script">
/* accepts as input one required parameter: DOM API to create a xref to */
/* this will first try to link to DOM:parm1, then DOM/parm1 if that doesn't exist */

/* get a page's language (Don't use page.language!) */
var u = Uri.Parts(Page.uri);
var lang = u.path[0];
var api = $0;

if (string.endswith($0, '()')) {
  var len = string.length($0);
  api = string.remove($0, len - 2);
}

var dest = lang + '/' + 'DOM:' + api;
if (wiki.pageExists(dest)) {
    <code>(web.link(wiki.uri(dest), $0))</code>;
} else {
    <code>(web.link(wiki.uri(lang + '/' + 'DOM/' + api), $0))</code>;
}

%>
