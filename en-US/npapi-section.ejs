<%
// Inserts a link to a section of a given NPAPI reference page
//
//  $0 - page name
//  $1 - section name

    var lang = env.locale;
    
    var langName = "Gecko Plugin API Reference";

    switch(lang) {
        case 'pl':
            langName = "Dokumentacja wtyczek Gecko";
            break;
        case 'de':
            langName = "Gecko Plugin API Referenz";
            break;
        case 'fr':
            langName = "Documentation API Greffons Gecko";
            break;
    }
    
    var destOldType = "/" + lang + '/docs/' + langName + ':' + $0;
    var destNewType = "/" + lang + '/docs/' + langName + '/' + $0;
    var url = "";

    if (wiki.pageExists(destNewType)) {
        url = destNewType;
    } else if (wiki.pageExists(destOldType)) {
        url = destOldType;
    } else {
        url = destNewType;
    }
    
    url = web.spacesToUnderscores(url + '#' + $1);
%>
<a href="<%=url%>"><%=$1%></a>
